[default]
# Player #
no-border
msg-color=yes
msg-module=yes
autofit=85%x85%

# Screenshots #                    
screenshot-template=TsubaMPV-%f-%P
screenshot-format=png
screenshot-tag-colorspace=yes
screenshot-png-compression=8

# OSD #
osd-font-size=20
osd-color="#E0F0F0F0"
osd-bold=yes
osd-border-color="#E0000000"
osd-border-size=1.6
osd-blur=0.2
osd-spacing=0.2

# Subs #  
blend-subtitles=yes
demuxer-mkv-subtitle-preroll=yes
sub-ass-vsfilter-blur-compat=no
sub-fix-timing=yes
sub-font-size=52
sub-border-size=3.0
sub-margin-x=100
sub-margin-y=50

# Audio #
volume-max=150
audio-file-auto=fuzzy
sub-auto=fuzzy
audio-normalize-downmix=yes
audio-resample-linear=yes
audio-delay=+0.084
hr-seek-framedrop=no

# Languages #
alang=jpn,jp,eng,en,enUS,en-US,de,ger
slang=eng,en,und,de,ger,jp,jap 

# Video Output # 
profile=gpu-hq
saturation=3
deband-threshold=20
deband-range=16
video-sync=display-resample
sigmoid-upscaling=yes
linear-downscaling=yes
interpolation
tscale=oversample
deband-iterations=2
target-trc=gamma2.2
vf=format=colorlevels=full:colormatrix=auto
video-output-levels=full

# Video Profiles #

[video-mac]
profile=mac-vo
ao=coreaudio

[video-mac-svp]
input-ipc-server=/tmp/mpvsocket

[video-mac-quality]
glsl-shaders-clr
profile=video-mac
scale=bilinear
glsl-shader="~~/Shaders/Ravu-Mac.glsl"

[standard-vo]
vo=gpu
temporal-dither=yes
dither=error-diffusion

[fallback-vo]
vo=gpu
temporal-dither=yes
dither=fruit
deband-iterations=1

[mac-vo]
vo=libmpv
gpu-api=opengl
opengl-pbo=yes
vd-lavc-dr=no
swapchain-depth=8
temporal-dither=yes
dither=fruit
deband-iterations=1
macos-title-bar-material=dark

[vulkan]
gpu-api=vulkan
vulkan-async-compute=yes
vulkan-async-transfer=yes
vulkan-queue-count=1
vd-lavc-dr=yes

[video-win]
profile=standard-vo
profile=vulkan

[video-win-fallback]
profile=fallback-vo
gpu-api=d3d11

[video-win-svp]
input-ipc-server=mpvpipe

[video-linux]
profile=standard-vo
gpu-api=vulkan

[video-linux-fallback]
profile=fallback-vo
gpu-api=opengl

[video-linux-svp]
input-ipc-server=/tmp/mpvsocket

[video-scale]
scale=haasnsoft
scale-clamp=0.2
cscale=ewa_lanczos

[video-upscaler-ravu-forDVD]
glsl-shaders-clr
profile=video-scale
glsl-shader="~~/Shaders/Ravu-3x.glsl"
glsl-shader="~~/Shaders/Ravu-Chroma.glsl"

[video-upscaler-ravu]
glsl-shaders-clr
profile=video-scale
glsl-shader="~~/Shaders/Ravu.glsl"
glsl-shader="~~/Shaders/Ravu-Chroma.glsl"

[video-upscaler-fsrcnnx]
glsl-shaders-clr
profile=video-scale
glsl-shader="~~/Shaders/FSRCNNX.glsl"
glsl-shader="~~/Shaders/KrigBilateral.glsl"

[video-upscaler-sssr]
glsl-shaders-clr
profile=video-scale
glsl-shader="~~/Shaders/SSimSuperRes.glsl"
glsl-shader="~~/Shaders/KrigBilateral.glsl"

[4k60]
profile-desc=cond:((p["video-params/w"]>1920 and p["video-params/h"]>1080) and p["estimated-vf-fps"]>=31)
deband=no

[4k30]
profile-desc=cond:((p["video-params/w"]>1920 and p["video-params/h"]>1080) and p["estimated-vf-fps"]<31)
deband=no

[full-hd-interlaced]
profile-desc=cond:((p["video-params/w"]==1920 and p["video-params/h"]==1080) and p["video-frame-info/interlaced"])
vf=bwdif

[hd-interlaced]
profile-desc=cond:((p["video-params/w"]==1280 and p["video-params/h"] == 720) and p["video-frame-info/interlaced"])
vf=bwdif

[sdtv-pal]
profile-desc=cond:((p["video-params/w"]==352 or p["video-params/w"]==480 or p["video-params/w"]==544 or p["video-params/w"]==720) and p["video-params/h"] == 576)
profile=video-upscaler-ravu-forDVD
vf=bwdif

[sdtv-ntsc]
profile-desc=cond:((p["video-params/w"]==640 or p["video-params/w"]==704 or p["video-params/w"]==720) and p["video-params/h"]==480)
profile=video-upscaler-ravu-forDVD
vf=bwdif

[4K-lavc-threads]
profile-desc=cond:get('width', -math.huge) >= 3840
vd-lavc-threads=32

[4K-lavc-threads-inverted]
profile-desc=cond:get('width', math.huge) < 3840
vd-lavc-threads=0

[protocol.file]
network-timeout=0
force-window=yes

[protocol-network]
network-timeout=5
force-window=immediate
hls-bitrate=max
cache=yes
no-cache-pause

[protocol.http]
profile=protocol-network

[protocol.https]
profile=protocol-network

[default]
# profile=video-mac                     # for Macs Only  
# profile=video-mac-quality             # For Macbook Pro 2018/later, and desktop macs    
# profile=video-mac-svp                 # SVP Support      

profile=video-win                     # for Windows
# profile=video-win-svp                 # SVP Support         
# profile=video-win-fallback			# For Old Graphics Cards	

# profile=video-linux                   # For Linux
# profile=video-linux-svp               # SVP Support 
# profile=video-linux-fallback          # For Old Graphics Cards

# profile=video-scale                   # Better Built-In Scaler
# profile=video-upscaler-ravu           # High Quality
profile=video-upscaler-sssr           # Very High Quality
# profile=video-upscaler-fsrcnnx        # Best Quality